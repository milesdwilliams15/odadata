# {odadata} <img src="inst/logo.png" align="right" height="130"/>

![R-version](https://img.shields.io/badge/R%20%3E%3D-4.2.1-brightgreen) ![updated](https://img.shields.io/badge/last%20update-09--24--2025-brightgreen) ![version](https://img.shields.io/badge/version-1.0.1-brightgreen) ![license](https://img.shields.io/badge/license-MIT-red) ![encoding](https://img.shields.io/badge/encoding-UTF--8-red) [![orchid](https://img.shields.io/badge/ORCID-0000--0003--0192--5542-brightgreen)](https://orcid.org/0000-0003-0192-5542)

An R package for adding dyadic and country-level development financing data to {peacesciencer} constructed datasets.

------------------------------------------------------------------------

To install the latest development version of the package:

```         
library(devtools)
devtools::install_github("milesdwilliams15/odadata")
```

The `{odadata}` package provides a convenient API for populating state-year and dyad-year datasets with development finance data within the [`{peacesciencer}`](https://github.com/svmiller/peacesciencer/tree/master) framework.

The package (as of now) provides two functions for adding development finance data. The first is `add_oda()`. It will populate either a dyad-year or state-year dataset with bilateral official development assistance (ODA) commitments and disbursements directly from the [OECD's online API](https://www.oecd.org/en/data/insights/data-explainers/2024/09/api.html). Values are in millions of 2023 US Dollars.

The second is `add_gcdf()`, which will populate a state-year dataset with bilateral Chinese commitments of ODA, other official flows (OOF), and vague official flows (VOF) based on recipient-year aggregates from [AidData's Global Chinese Development Finance Dataset, Version 3.0](https://www.aiddata.org/data/aiddatas-global-chinese-development-finance-dataset-version-3-0).

To use either function, you must first create a country dyad-year or state-year dataset using a `{peacesciencer}` `create_*()` function.

To get started, you should open the `{tidyverse}` (recommended) and `{peacesciencer}`, along with `{odadata}`.

```         
library(tidyverse)
library(peacesciencer)
library(odadata)
```

Then you can start making datasets. For example, the below code will make a dyad-year dataset where ODA commitments and disbursements from country 1 to country 2 are added as new columns.

```         
create_dyadyears(subset_years = 1960:2023) |>
  add_oda() -> dt
```

You can make a state-year dataset of total bilateral ODA commitments and disbursements like so:

```         
create_stateyears(subset_years = 1960:2023) |>
  add_oda() -> dt
```

By default, `add_oda()` adds ODA giving by donor when populating a state-year level dataset. If you want it to provide ODA received instead, simply set `type = "recipient"`.

```         
create_stateyears(subset_years = 1960:2023) |>
  add_oda(type = "recipient") -> dt
```

Conversely, if you want to construct a state-year dataset of Chinese bilateral commitments of development financing, you can write:

```         
create_stateyears(subset_years = 2000:2021) |>
  add_gcdf() -> dt
```

By default, the full set of dyad-years or state-years generated by `create_*()` will be returned. You may not, however, be interested in every single case, but instead only the universe of relevant donors and/or recipients as captured by the OECD or AidData. You can use the function `filter_rdr()` to whittle the data down to only relevant donors and/or recipients. For example:

```         
create_dyadyears(subset_years = 1960:2023) |>
  add_oda() |>
  filter_rdr() -> dt
```

In the above example, data is filtered by valid ODA commitments by default, which only have valid entries from 1966 to 2023. If you would prefer to filter by ODA disbursements, which run from 1960 to 2023, you can specify `by = "disbursements"` in `filter_rdr()` instead. Or if you want to use this for Chinese development financing, you can specify `by = "chinese"`.

The `filter_rdr()` function works by dropping rows with missing values for the relevant type of financing. NAs are reserved for observations in the dataset that do not make an appearance in the raw data *and* that could not in principle. For example, if a donor "A" never gives aid to recipient "X" but donor "B" does, then aid from "A" to "X" is treated as a zero. Conversely, if a country "Y" never receives aid from "A" or "B" or any other donor, aid is treated as NA.

**Caution**: The package is currently in the early development stages. At the moment, I'd recommend this for teaching or personal exploration of the data. Use it for academic research at your own risk, and if you do, make sure you implement some sensible quality control measures.
